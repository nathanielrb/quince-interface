var cledit = function(elt){

            var editor = window.cledit(elt);

            var prismGrammar = window.mdGrammar({
		fences: true,
		tables: true,
		footnotes: true,
		abbrs: true,
		deflists: true,
		tocs: true,
		dels: true,
		subs: true,
		sups: true
            })
            editor.init({
		sectionHighlighter: function (section) {
                    return window.Prism.highlight(section.text, prismGrammar)
		},
		
		// Optional (increases performance on large documents)
		sectionParser: function (text) {
                    var offset = 0
                    var sectionList = []
                    ;(text + '\n\n').replace(/^.+[ \t]*\n=+[ \t]*\n+|^.+[ \t]*\n-+[ \t]*\n+|^\#{1,6}[ \t]*.+?[ \t]*\#*\n+/gm, function (match, matchOffset) {
			sectionList.push(text.substring(offset, matchOffset))
			offset = matchOffset
                    })
                    sectionList.push(text.substring(offset))
                    return sectionList
		}
            })


    var pagedown = new window.Pagedown({input: editor});
    pagedown.run();

    this.buttons = new buttonBar(this.editorSvc);
    {
	cledit: editor,
	pagedownEditor: pagedown
    }
}
